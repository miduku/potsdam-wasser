/*!
 * fastplate
 * Barebones Responsive SCSS Boilerplate with vertical rhythm
 * http://miduku.github.io/fastplate/example.html
 * @author Dustin Kummer
 * @version 0.0.1
 * Copyright 2017. MIT licensed.
 */
!function(n,i){"use strict";var e=function(){function i(n){var i,e,a=n.offsetHeight;if(t)o=t();else for(var s in r)i=s,document.body.clientWidth>i&&i>=e&&(o=r[s],e=i);n.style.marginBottom=o-a%o+"px"}function e(e){i(e),"addEventListener"in n?n.addEventListener("resize",function(){i(e)},!1):"attachEvent"in n&&n.attachEvent("resize",function(){i(e)})}var t,o=0,r={};return function(n,i){var a="string"==typeof n?document.querySelectorAll(n):n,s=a.length;if("number"==typeof i)o=parseInt(i,10);else if("function"==typeof i)t=i;else if("object"==typeof i){var c=parseInt(getComputedStyle(document.body,null).getPropertyValue("font-size"),10);for(var u in r){var l=/\d+em/.test(u)?parseInt(u,10)*c:/\d+px/.test(u)?parseInt(u,10):u;r[l]=parseInt(r[u],10)}}if(s>1)for(;s--;)e(a[s]);else e(a[0])}}();"undefined"!=typeof i?i.extend(i.fn,{baseline:function(n){return e(this,n)}}):n.baseline=e}(window,window.jQuery||window.Zepto||void 0),function(n,i,e,t){"use strict";function o(n,i){return i.offset().top-n.offset().top-n.outerHeight()}function r(n,i){return i.offset().top-n.offset().top}var a={w:n(i),navContainer:n(".nav-container"),navMain:{_this:n(".nav-main"),icon:{_this:n(".nav-main ul i"),gewinnung:n(".nav-main-gewinnung i"),versorgung:n(".nav-main-versorgung i"),reinigung:n(".nav-main-reinigung i"),natur:n(".nav-main-natur i"),last:n(".nav-main-last i")}},section:{intro:n("#section-intro"),natur:n("#section-natur")},icon:{_this:n(".container .icon i"),gewinnung:n("#section-gewinnung .icon i"),versorgung:n("#section-versorgung .icon i"),reinigung:n("#section-reinigung .icon i"),natur:n("#section-natur .icon i")},footer:{_this:n("footer")}},s={iconPositionsArr:{mainIcons:[a.icon.natur,a.icon.gewinnung,a.icon.versorgung,a.icon.reinigung,a.footer._this],navIcons:[a.navMain.icon.natur,a.navMain.icon.gewinnung,a.navMain.icon.versorgung,a.navMain.icon.reinigung,a.navMain.icon.last]},colors:{gewinnung:[40,137,179],versorgung:[56,115,184],reinigung:[130,154,175],natur:[46,156,204]}};n(function(){a.icon._this.append('<div class="waterpipe"><div class="water"></div></div>'),a.navMain._this.children("ul").find("li:not(:last) i").append('<div class="waterpipeNav"><div class="water"></div></div>'),n('.nav-main a[href^="#"]').bind("click.smoothscroll",function(e){e.preventDefault();var t=this.hash,o=n(t);n("html, body").stop().animate({scrollTop:o.offset().top},900,"swing",function(){i.location.hash=t})});var e={Controller:new ScrollMagic.Controller,scene:{NavSticky:new ScrollMagic.Scene({triggerElement:"#section-intro",triggerHook:0,duration:2*r(a.section.intro,a.section.natur)})},cast:{NavSticky:function(){return e.scene.NavSticky.addTo(e.Controller).addIndicators({name:"navSticky"}).on("progress resize",function(n){var i=n.progress;.5<=i&&i<1?a.navMain._this.removeClass("retracted hidden").addClass("extended").css({left:0}):1===i?a.navMain._this.removeClass("retracted extended").addClass("hidden extended").css({left:0}):a.navMain._this.removeClass("extended hidden").addClass("retracted").css({left:a.navContainer.offset().left})})},Waterpipe:function(i,t){var r=[s.colors.natur,s.colors.gewinnung,s.colors.versorgung,s.colors.reinigung,s.colors.natur];return i.each(function(i,s){var c=[r[i+1][0]-r[i][0],r[i+1][1]-r[i][1],r[i+1][2]-r[i][2]],u=new ScrollMagic.Scene({triggerElement:s,triggerHook:.75}).addTo(e.Controller).addIndicators({name:"Waterpipe"+i}).on("progress",function(e){var t=e.progress.toFixed(3),o=100*t,u=o*t,l=[Math.round(r[i][0]+c[0]*t),Math.round(r[i][1]+c[1]*t),Math.round(r[i][2]+c[2]*t)],g="linear-gradient(to bottom, rgb("+r[i][0]+","+r[i][1]+","+r[i][2]+") 0%, rgb("+l.join(",")+") 100%)";n(s).children(".water").css({background:g,height:u+"%"}),a.navMain.icon._this.eq(i).children(".waterpipeNav").children(".water").css({background:g,height:o+"%"})});a.w.on("resize",function(){u.duration(o(t[i],t[i+1])),u.refresh()})})}}};e.cast.Waterpipe(n(".waterpipe"),s.iconPositionsArr.mainIcons),e.cast.NavSticky(),a.w.trigger("resize"),a.navMain._this.trigger("resize")});var c={allow:!0,reallow:function(){c.allow=!0},delay:300};a.w.on("resize",function(){a.section.intro.css("height",a.w.outerHeight()),a.section.natur.css({height:2*a.w.outerHeight(),marginBottom:a.w.outerHeight()}),n(".waterpipe").each(function(i,e){n(e).css("height",o(s.iconPositionsArr.mainIcons[i],s.iconPositionsArr.mainIcons[i+1]))})}),a.navMain._this.bind("resize",function(){console.log("navMain resized"),a.navMain.icon._this.each(function(i,e){i<s.iconPositionsArr.navIcons.length-1&&n(e).children(".waterpipeNav").css("height",o(s.iconPositionsArr.navIcons[i],s.iconPositionsArr.navIcons[i+1]))})}),a.w.on("load scroll",function(){c.allow&&(c.allow=!1,setTimeout(c.reallow,c.delay))})}(jQuery,window,document);