/*!
 * fastplate
 * Barebones Responsive SCSS Boilerplate with vertical rhythm
 * http://miduku.github.io/fastplate/example.html
 * @author Dustin Kummer
 * @version 0.0.1
 * Copyright 2016. MIT licensed.
 */
!function(e,t){"use strict";var n=function(){function t(e){var t,n,a=e.offsetHeight;if(r)o=r();else for(var s in i)t=s,document.body.clientWidth>t&&t>=n&&(o=i[s],n=t);e.style.marginBottom=o-a%o+"px"}function n(n){t(n),"addEventListener"in e?e.addEventListener("resize",function(){t(n)},!1):"attachEvent"in e&&e.attachEvent("resize",function(){t(n)})}var r,o=0,i={};return function(e,t){var a="string"==typeof e?document.querySelectorAll(e):e,s=a.length;if("number"==typeof t)o=parseInt(t,10);else if("function"==typeof t)r=t;else if("object"==typeof t){var l=parseInt(getComputedStyle(document.body,null).getPropertyValue("font-size"),10);for(var c in i){var d=/\d+em/.test(c)?parseInt(c,10)*l:/\d+px/.test(c)?parseInt(c,10):c;i[d]=parseInt(i[c],10)}}if(s>1)for(;s--;)n(a[s]);else n(a[0])}}();"undefined"!=typeof t?t.extend(t.fn,{baseline:function(e){return n(this,e)}}):e.baseline=n}(window,window.jQuery||window.Zepto||void 0),function(e,t,n,r){"use strict";function o(e){var t=e.parent().innerHeight(),n=e.innerHeight(),r=e.innerWidth();return e.css({position:"absolute",top:t/2-n/2,left:l.w.outerWidth()/2-r/2,paddingTop:0})}function i(e,t){return t.offset().top-e.offset().top}function a(e,t){var n=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(n*n+r*r)}function s(e,t,n){var r=a(e,[0,0]),o=a(e,[t,0]),i=a(e,[t,n]),s=a(e,[0,n]);return Math.max(r,o,i,s)}var l={w:e(t),main:e(".main"),content:e(".content"),footer:e(".footer"),header_container:e(".header .container"),headerSticky:e(".header-sticky"),headerArticle:e(".header-article"),sectionReinigung_headerArticle:e(".section-reinigung .header-article"),sectionVersorgung_headerArticle:e(".section-versorgung .header-article"),fullscreen:e(".fullscreen"),baselineElements:e("picture > *, .group-img img, .embed, figure img, figure figcaption, .fullscreen, .header-article .l img"),anim:{rain:e(".anim-rain")}},c={offsetLeft:0,offsetTop:.8,width:6,colors:{gewinnung:[40,137,179],versorgung:[56,115,184],reinigung:[130,154,175]}};e(function(){l.headerArticle.append('<span class="circle"></span>'),e(t).trigger("resize"),l.content.append('<div class="stream"><span class="water"></span></div>').children(".stream").css({position:"absolute",left:100*c.offsetLeft+"%",width:c.width+"px",marginLeft:-(c.width/2)+"px"}),l.baselineElements.baseline(function(){return parseFloat(getComputedStyle(n.documentElement,null).getPropertyValue("line-height"))});var r={Controller:new ScrollMagic.Controller({loglevel:3}),tween:{CloudFromRight:TweenMax.staggerFromTo(".cloudFromRight",2,{left:"100%"},{left:"0%",ease:Power1.easeInOut},1),CloudFromLeft:TweenMax.staggerFromTo(".cloudFromLeft",2,{right:"100%"},{right:"0%",ease:Power1.easeInOut},1)},scene:{CloudsFromRight:new ScrollMagic.Scene({triggerElement:".anim-rain",triggerHook:1,duration:l.anim.rain.innerHeight()/3}),CloudsFromLeft:new ScrollMagic.Scene({triggerElement:".anim-rain",triggerHook:1,duration:l.anim.rain.innerHeight()/3})},cast:{CloudsFromRight:function(){return r.scene.CloudsFromRight.addTo(r.Controller).setTween(r.tween.CloudFromRight).addIndicators({name:"staggering"})},CloudsFromLeft:function(){return r.scene.CloudsFromLeft.addTo(r.Controller).setTween(r.tween.CloudFromLeft).addIndicators({name:"staggering2"})},Flood:function(t){return t.each(function(t,n){new ScrollMagic.Scene({triggerElement:n,triggerHook:c.offsetTop,duration:e(n).outerHeight()}).addTo(r.Controller).addIndicators({name:"flood"+t}).on("progress end",function(r){console.log("stream"+t,r.state,r.type),console.log("stream"+t,r.progress.toFixed(3)),"AFTER"===r.state?(console.log("after"),e(n).children(".circle").css({transform:"scale(1)"})):e(n).children(".circle").css({transform:"scale("+r.progress.toFixed(3)+")"})})})},Stream:function(t){return t.each(function(t,n){var o=[l.sectionVersorgung_headerArticle,l.sectionReinigung_headerArticle,l.footer],a=i(e(n).parent(),o[t]),s=a-l.w.outerHeight(),d=[c.colors.gewinnung,c.colors.versorgung,c.colors.reinigung,c.colors.gewinnung],g=[d[t+1][0]-d[t][0],d[t+1][1]-d[t][1],d[t+1][2]-d[t][2]],u=new ScrollMagic.Scene({triggerElement:n,triggerHook:0,duration:s}).addTo(r.Controller).setPin(n).addIndicators({name:"Stream"+t}).on("progress",function(r){var o=r.progress.toFixed(3),i=[Math.round(d[t][0]+g[0]*o),Math.round(d[t][1]+g[1]*o),Math.round(d[t][2]+g[2]*o)];e(n).children(".water").css({backgroundColor:"rgb("+i.join(",")+")",height:100*o+"%"})});l.w.on("load resize",function(){e(n).css({maxHeight:a+"px"}),u.duration(i(e(n).parent(),o[t])-l.w.outerHeight()),u.refresh()})})}}};r.cast.CloudsFromRight(),r.cast.CloudsFromLeft(),r.cast.Flood(l.headerArticle),r.cast.Stream(e(".stream"))});var d={allow:!0,reallow:function(){d.allow=!0},delay:300};l.w.on("load resize",function(){var t=l.w.outerHeight();l.fullscreen.outerHeight(t),l.anim.rain.outerHeight(3*t),e(".stream").css({height:t+"px"}),o(l.header_container),l.headerArticle.each(function(){var t=e(this).innerWidth(),n=e(this).innerHeight(),r=[t*c.offsetLeft,0],o=s(r,t,n);e(this).children(".circle").css({transform:"scale(0)",padding:o,marginLeft:-o,marginTop:-o,left:100*c.offsetLeft+"%"})})}),l.w.on("load scroll",function(){if(d.allow){var e=l.w.scrollTop();l.headerSticky.toggleClass("sticking",e>l.header_container.position().top),d.allow=!1,setTimeout(d.reallow,d.delay)}})}(jQuery,window,document);