/*!
 * potsdam-wasser
 * 
 * 
 * @author Dustin Kummer
 * @version 1.0.0
 * Copyright 2016. MIT licensed.
 */
!function(e,i,r,n){"use strict";function s(r,s,o,a){return new ScrollMagic.Scene({triggerElement:r,triggerHook:e(i).height(),duration:e(r).outerHeight()}).addIndicators({name:r}).on("progress",function(i){e(s).css("height",100/3*i.progress.toFixed(3)+"%"),a===n&&(a=o);var r=[a[0]-o[0],a[1]-o[1],a[2]-o[2]],t=[Math.round(o[0]+r[0]*i.progress.toFixed(3)),Math.round(o[1]+r[1]*i.progress.toFixed(3)),Math.round(o[2]+r[2]*i.progress.toFixed(3))];e(".indicator").css("background-color","rgb("+t.join(",")+")")})}var o=e(".logo-pw"),a=e(".logo-pw, .sidebar"),t=e(".sidebar");e(i).on("scroll",function(){var r=e(i).scrollTop();e(".header").toggleClass("shrink",r>200),t.toggleClass("shrink",r>200)}),o.on("click",function(e){e.preventDefault(),t.hasClass("open")?a.removeClass("open"):a.addClass("open")}),e("main, footer").on("click",function(){t.hasClass("open")&&a.removeClass("open")});var l=new ScrollMagic.Controller;e(".progressbar").css({height:e(i).height()}).append('<div class="indicator indicator-gewinnung"></div><div class="indicator indicator-versorgung"></div><div class="indicator indicator-reinigung"></div>');var g,c=s(".sec-gewinnung",".indicator-gewinnung",[114,120,141]),d=s(".sec-versorgung",".indicator-versorgung",[114,120,141],[56,115,185]),u=s(".sec-reinigung",".indicator-reinigung",[56,115,185],[134,120,109]),h=new ScrollMagic.Scene({triggerElement:".sec-gewinnung",triggerHook:0,duration:e(".progress-wrapper").outerHeight()-e(i).height(),reverse:!0}).addIndicators({name:"Progressbar"}).setPin(".progressbar");clearTimeout(g),g=setTimeout(function(){e("section").each(function(i,r){var n=e(this).outerHeight();new ScrollMagic.Scene({triggerElement:r,duration:n}).on("enter",function(){0===i&&e(".side-intro").addClass("active").siblings("li").removeClass("active").children("ul").slideUp(),1===i?e(".side-gewinnung > ul").slideDown().parent("li").addClass("active").siblings("li").removeClass("active").children("ul").slideUp():2===i?e(".side-versorgung > ul").slideDown().parent("li").addClass("active").siblings("li").removeClass("active").children("ul").slideUp():3===i&&e(".side-reinigung > ul").slideDown().parent("li").addClass("active").siblings("li").removeClass("active").children("ul").slideUp()}).addTo(l)})},250),l.addScene([c,d,u,h]),e(i).on("resize",function(){e(".progressbar, .scrollmagic-pin-spacer").css({height:e(i).height()}),t.hasClass("open")&&a.removeClass("open"),h.duration(e(".progress-wrapper").outerHeight()-e(i).height())}),console.log(h.duration),e(".nav-sidebar a").anchorScroll({scrollSpeed:800,offsetTop:e(".header").height()})}(jQuery,window,document);